const data={
//Datos extrapolados
 datos:{
    fechas:['enero 2018','febrero 2018','marzo 2018','abril 2018','mayo 2018','junio 2018','julio 2018','agosto 2018','septiembre 2018','octubre 2018','noviembre 2018','diciembre 2018',
    'enero 2019','febrero 2019','marzo 2019','abril 2019','mayo 2019','junio 2019','julio 2019','agosto 2019','septiembre 2019','octubre 2019','noviembre 2019','diciembre 2019',
    'enero 2020','febrero 2020','marzo 2020','abril 2020','mayo 2020','junio 2020','julio 2020','agosto 2020','septiembre 2020','octubre 2020','noviembre 2020','diciembre 2020',
    'enero 2021','febrero 2021','marzo 2021','abril 2021','mayo 2021','junio 2021','julio 2021','agosto 2021','septiembre 2021','octubre 2021','noviembre 2021','diciembre 2021',
    'enero 2022','febrero 2022','marzo 2022','abril 2022','mayo 2022','junio 2022','julio 2022','agosto 2022','septiembre 2022','octubre 2022','noviembre 2022','diciembre 2022',
    'enero 2023','febrero 2023','marzo 2023','abril 2023','mayo 2023','junio 2023','julio 2023','agosto 2023','septiembre 2023','octubre 2023','noviembre 2023','diciembre 2023',
    'enero 2024','febrero 2024','marzo 2024','abril 2024','mayo 2024','junio 2024','julio 2024','agosto 2024','septiembre 2024','octubre 2024','noviembre 2024','diciembre 2024',
    'enero 2025','febrero 2025','marzo 2025','abril 2025','mayo 2025','junio 2025','julio 2025','agosto 2025','septiembre 2025','octubre 2025','noviembre 2025','diciembre 2025',
    'enero 2026','febrero 2026','marzo 2026','abril 2026','mayo 2026','junio 2026','julio 2026','agosto 2026','septiembre 2026','octubre 2026','noviembre 2026','diciembre 2026',
    'enero 2027','febrero 2027','marzo 2027','abril 2027','mayo 2027','junio 2027','julio 2027','agosto 2027','septiembre 2027','octubre 2027','noviembre 2027'],
    
//Sarampion
 sarampion:{
    infectados: [
        0, 0, 0, 12, 0, 0, 4, 1, 2, 0, 12, 0, 0, 0, 124, 124, 0, 0, 0, 26, 23, 37, 155, 47, 22, 7, 0, 1, 0, 0, 0, 0, 0, 0, 77,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
      ],
    recuperados:[
        0, 0, 0, 0, 12, 12, 12, 16, 17, 19, 19, 31, 31, 31, 31, 155, 279, 279, 279, 279, 305, 327, 364, 519, 567, 589, 596,
        596, 597, 597, 597, 597, 597, 597, 597, 674, 676, 676, 676, 676, 676, 676, 676, 676, 676, 676, 676, 676, 677, 677,
        677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677,
        677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677,
        677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677,
        677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677,
        677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677,
        677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677, 677
      ],
    vacunados:[
        301763, 1070635, 1122208, 1187386, 1231972, 1276001, 1333897, 1409566, 1477948, 1532654, 1579547, 1630265, 1700588, 1766214,
        1824550, 1883897, 1929998, 1980887, 2033311, 2106024, 2248768, 2346543, 2426051, 2440355, 2460406, 2472485, 2485040, 2497477,
        2509111, 2519005, 2524675, 2525095, 2525104, 2525111, 2525116, 2525118, 2532024, 2532026, 2532034, 2582140, 2631953, 2681473,
        2730703, 2779644, 2828298, 2876667, 2924753, 2972556, 3026646, 3073993, 3121062, 3167856, 3214374, 3260620, 3306595, 3352301,
        3397738, 3442909, 3487814, 3532457, 3576838, 3620958, 3664820, 3708425, 3751774, 3794868, 3837710, 3880301, 3922642, 3964735,
        4006581, 4048181, 4089538, 4130652, 4171525, 4212158, 4252553, 4292711, 4332634, 4372322, 4411778, 4451002, 4489996, 4528762,
        4567300, 4605613, 4643700, 4681565, 4719207, 4756629, 4793831, 4830815, 4867582, 4904133, 4940470, 4976595, 5012507, 5048208,
        5083700, 5118984, 5154061, 5188933, 5223600, 5258063, 5292325, 5326386, 5360247, 5393909, 5427374, 5460643, 5493716, 5526596,
        5559282, 5591778, 5624083, 5656198, 5688125, 5719865, 5751418
      ],
    susceptibles:[
        10671707, 9902835, 9851263, 9786071, 9741474, 9697445, 9639545, 9563871, 9495487, 9440778,
        9393874, 9343144, 9311957, 9246330, 9187870, 9128275, 9082050, 9031161, 8978738, 8905998,
        8763206, 8665372, 8585672, 8571167, 8586102, 8573994, 8561432, 8548995, 8537360, 8527465,
        8521796, 8521377, 8521367, 8521359, 8521277, 8521199, 8544481, 8544479, 8544471, 8494364,
        8444552, 8395031, 8345801, 8296860, 8248206, 8199837, 8151752, 8103949, 8073944, 8026597,
        7979527, 7932734, 7886216, 7839969, 7793994, 7748289, 7702851, 7657681, 7612775, 7568132,
        7523751, 7479630, 7435769, 7392163, 7348815, 7305720, 7262877, 7220286, 7177945, 7135853,
        7094007, 7052407, 7011050, 6969937, 6929064, 6888430, 6848035, 6807877, 6767954, 6728266,
        6688810, 6649585, 6610591, 6571826, 6533288, 6494976, 6456888, 6419024, 6381381, 6343960,
        6306758, 6269774, 6233007, 6196456, 6160119, 6123995, 6088083, 6052382, 6016889, 5981606,
        5946529, 5911657, 5876990, 5842526, 5808265, 5774204, 5740343, 5706681, 5673216, 5639947,
        5606873, 5573993, 5541307, 5508812, 5476507, 5444392, 5412465, 5380725, 5349172
      ],
},
//Parotiditis
parotiditis:{
    infectados: [
        0, 0, 0, 158, 7, 20, 16, 27, 16, 19, 159, 0, 186, 5, 7, 12, 12, 6, 0, 21, 11, 10, 192, 109, 21, 20, 1, 5, 2, 0, 2, 0, 0,
        0, 102, 48, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0
      ],
    recuperados:[
        0, 0, 0, 0, 158, 165, 185, 201, 227, 243, 262, 421, 423, 608, 613, 620, 632, 644, 650, 650, 671, 682, 691, 884, 996, 1017,
        1037, 1038, 1043, 1045, 1045, 1047, 1047, 1047, 1047, 1148, 1200, 1200, 1203, 1203, 1203, 1203, 1203, 1203, 1203, 1203,
        1203, 1203, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205,
        1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205,
        1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205,
        1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205,
        1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205,
        1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205,
        1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205, 1205
      ],
    vacunados:[
        301763, 1070635, 1122208, 1187386, 1231990, 1276020, 1333919, 1409592, 1477978, 1532688, 1579585, 1630328, 1700654,
        1766311, 1824652, 1884003, 1930109, 1981003, 2033431, 2106148, 2248905, 2346688, 2426203, 2440551, 2460628, 2472713,
        2485273, 2497712, 2509348, 2519244, 2524913, 2525334, 2525343, 2525351, 2525356, 2525381, 2532298, 2532300, 2532309,
        2562349, 2592284, 2622113, 2651838, 2681458, 2710974, 2740386, 2769695, 2798900, 2834153, 2863216, 2892178, 2921038,
        2949796, 2978453, 3007010, 3035465, 3063822, 3092078, 3120235, 3148292, 3176252, 3204113, 3231876, 3259542, 3287109,
        3314581, 3341955, 3369234, 3396417, 3423503, 3450495, 3477392, 3504194, 3530902, 3557516, 3584036, 3610464, 3636798,
        3663040, 3689190, 3715247, 3741213, 3767088, 3792871, 3818564, 3844167, 3869680, 3895103, 3920437, 3945681, 3970837,
        3995905, 4020884, 4045775, 4070579, 4095295, 4119925, 4144468, 4168925, 4193296, 4217581, 4241781, 4265896, 4289926,
        4313871, 4337733, 4361510, 4385204, 4408814, 4432342, 4455787, 4479149, 4502429, 4525628, 4548744, 4571780, 4594735,
        4617608, 4640402
      ],
    susceptibles:[
        10671707, 9902835, 9851263, 9785925, 9741314, 9697265, 9639350, 9563651, 9495249, 9440519, 9393464, 9342721, 9311344,
        9245681, 9187334, 9127971, 9081853, 9030953, 8978525, 8905787, 8763019, 8665227, 8585519, 8571063, 8586019, 8573915,
        8561353, 8548911, 8537272, 8527376, 8521704, 8521284, 8521275, 8521267, 8521160, 8521087, 8544358, 8544353, 8544345,
        8514304, 8484369, 8454540, 8424816, 8395196, 8365680, 8336267, 8306959, 8277753, 8266588, 8237524, 8208562, 8179702,
        8150944, 8122287, 8093730, 8065274, 8036919, 8008662, 7980505, 7952447, 7924488, 7896627, 7868864, 7841199, 7813630,
        7786159, 7758785, 7731506, 7704323, 7677237, 7650245, 7623348, 7596546, 7569838, 7543224, 7516704, 7490276, 7463942,
        7437700, 7411550, 7385493, 7359527, 7333652, 7307868, 7282175, 7256572, 7231060, 7205637, 7180303, 7155059, 7129903,
        7104836, 7079856, 7054965, 7030161, 7005445, 6980815, 6956272, 6931815, 6907444, 6883159, 6858959, 6834844, 6810815,
        6786868, 6763007, 6739230, 6715536, 6691926, 6668398, 6644953, 6621591, 6598311, 6575112, 6551995, 6528960, 6506005,
        6483132, 6460338
      ],
},

//Tuberculosis
tuberculosis:{
    infectados:[
        0, 0, 0, 0, 0, 0, 12, 9, 0, 0, 40, 0, 0, 0, 208, 0, 232, 413, 638, 622, 877, 661, 5375, 685, 418, 182, 696, 905, 213,
        390, 547, 0, 0, 213, 4880, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
      ],
    recuperados:[
        0, 0, 0, 0, 0, 0, 0, 12, 20, 20, 20, 61, 61, 61, 61, 269, 269, 502, 915, 1552, 2174, 3051, 3712, 9087, 9867, 10286, 10467,
        11163, 12068, 12281, 12670, 13217, 13217, 13217, 13430, 18310, 18484, 18484, 18484, 18484, 18484, 18484, 18484, 18484,
        18484, 18484, 18484, 18484, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656,
        18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656,
        18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656,
        18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656,
        18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656,
        18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656, 18656,
        18656, 18656
      ],

    vacunados:[
        27845, 42954, 56749, 70532, 83478, 96468, 110857, 124491, 137976, 150298, 162449, 176114, 190730, 204926, 218738, 232513,
        245325, 258416, 270845, 282793, 293733, 303971, 316036, 328325, 341576, 349494, 356516, 364310, 372776, 381038, 388707, 396685,
        403274, 409848, 416710, 424753, 436909, 445737, 454034, 482325, 510599, 538855, 567093, 595314, 623517, 651703, 679871, 708021,
        743001, 771378, 799737, 828078, 856402, 884708, 912996, 941267, 969520, 997755, 1025973, 1054173, 1082356, 1110521, 1138668, 1166798,
        1194910, 1223004, 1251082, 1279141, 1307183, 1335208, 1363215, 1391204, 1419176, 1447131, 1475068, 1502988, 1530890, 1558775, 1586643,
        1614493, 1642325, 1670140, 1697939, 1725719, 1753482, 1781228, 1808957, 1836668, 1864362, 1892039, 1919698, 1947340, 1974965, 2002573,
        2030164, 2057737, 2085293, 2112832, 2140353, 2167858, 2195345, 2222815, 2250268, 2277704, 2305122, 2332524, 2359908, 2387276, 2414626,
        2441959, 2469275, 2496574, 2523856, 2551121, 2578369, 2605600, 2632814, 2660011, 2687191
      ],
    susceptibles:[
        44466657, 44451549, 44437754, 44423969, 44411026, 44398035, 44383635, 44369980, 44356485, 44344164, 44331972, 44318266,
        44747860, 44733663, 44719645, 44705662, 44692617, 44678881, 44665399, 44652192, 44639753, 44627979, 44609877, 44591529,
        45015036, 45006516, 44998616, 44989223, 44979639, 44970773, 44962169, 44953645, 44947054, 44940268, 44928314, 44915390,
        45334869, 45326042, 45317746, 45289452, 45261179, 45232922, 45204684, 45176463, 45148260, 45120074, 45091907, 45063756,
        45030720, 45454516, 45426141, 45397781, 45369439, 45341115, 45312810, 45284522, 45256250, 45227997, 45199762, 45171544,
        45143344, 45115161, 45086996, 45058847, 45030720, 45002607, 44974512, 44946436, 44918376, 44890333, 44862310, 44834303,
        44806312, 44778340, 44750385, 44722447, 44694528, 44666625, 44638739, 44610873, 44583021, 44555188, 44527373, 44499577,
        44471794, 44444033, 44416287, 44388558, 44360844, 44333153, 44305476, 44277816, 44250175, 44222551, 44194943, 44167352,
        44139780, 44112226, 44084686, 44057165, 44029658, 44002171, 43974700, 43947248, 43919810, 43892393, 43864993, 43837610,
        43810240, 43782889, 43755557, 43728241, 43700942, 43673661, 43646393, 43619147, 43591918, 43564704, 43537506, 43510325
      ],
},
},
}

//Ahora hacemos un codigo para seleccionar los datos y el tipo de grafico
let currentData = 'data.datos.sarampion.infectados';
let currentChartType = 'bar';

var ctx = document.getElementById('mychart').getContext('2d');

var chart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: data.datos.fechas,
        datasets: [{
            label: 'Infectados Sarampion',
            data: data.datos.sarampion.infectados,
            borderColor: 'rgba(255, 102, 153, 1)',
            backgroundColor: 'rgba(255, 182, 193, 0.6)',
            borderWidth: 1,
            fill: false
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
function updateChart() {
    chart.destroy(); // Destruir el gráfico actual
    var selectedData2 = document.getElementById('dataSelect2').value;
    var selectedData3 = document.getElementById('dataSelect3').value;
    // Obtener las fechas de inicio y finalización en formato de mes y año
    var startMonth = document.getElementById('mes_inicio').value;
    var startYear = document.getElementById('ano_inicio').value;
    var startDate = startMonth + ' ' + startYear;

    var endMonth = document.getElementById('mes_fin').value;
    var endYear = document.getElementById('ano_fin').value;
    var endDate = endMonth + ' ' + endYear;
    var selectedChartType = document.querySelector('input[name="chartType"]:checked').value;

            var filteredData = data.datos[selectedData2][selectedData3];
            var filteredLabels = data.datos.fechas;
            // Realizar la filtración con fechas
    if (startDate && endDate) {
        var startIndex = findIndexByDate(filteredLabels, startDate);
        var endIndex = findIndexByDate(filteredLabels, endDate);

        if (startIndex >= 0 && endIndex >= 0) {
            filteredData = data.datos[selectedData2][selectedData3].slice(startIndex, endIndex + 1);
            filteredLabels = data.datos.fechas.slice(startIndex, endIndex + 1);
        }
    }
    var newData = {
                labels: filteredLabels,
                datasets: [{
                    label: filteredLabels,
                    data: filteredData,
                    borderColor: selectedChartType === 'line' ? 'rgba(255, 102, 153, 1)' : 'rgba(255, 102, 153, 0.6)',
                    backgroundColor: selectedChartType === 'bar' ? 'rgba(255, 182, 193, 0.6)' : 'rgba(0, 0, 0, 0)',
                    borderWidth: 1,
                    fill: selectedChartType === 'line' ? false : true
                }]
            };

            chart = new Chart(ctx, {
                type: selectedChartType,
                data: newData,
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        };

        document.getElementById('dataSelect2').addEventListener('change', updateChart);
        document.getElementById('dataSelect3').addEventListener('change', updateChart);
        document.getElementById('mes_inicio').addEventListener('change', updateChart);
        document.getElementById('ano_inicio').addEventListener('change', updateChart);
        document.getElementById('mes_fin').addEventListener('change', updateChart);
        document.getElementById('ano_fin').addEventListener('change', updateChart);
        document.getElementById('lineChart').addEventListener('click', updateChart);
        document.getElementById('barChart').addEventListener('click', updateChart);

 // Función para encontrar el índice de una fecha en el arreglo de fechas
function findIndexByDate(dateArray, targetDate) {
    for (let i = 0; i < dateArray.length; i++) {
        if (dateArray[i] === targetDate) {
            return i;
        }
    }
    return -1;
}